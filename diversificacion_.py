# -*- coding: utf-8 -*-
"""Diversificacion .ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1zKUdK2d2_YB7f27nMz3M3XNio-fxOM_s
"""

# Commented out IPython magic to ensure Python compatibility.
# # -*- coding: utf-8 -*-
# """Aplicaci√≥n completa de An√°lisis de Portafolio de Inversi√≥n (Colab + Streamlit)"""
# 
# # -----------------------------------------------------------
# # INSTALACI√ìN DE DEPENDENCIAS (solo la primera vez)
# # -----------------------------------------------------------
# !pip install streamlit yfinance pandas matplotlib --quiet
# 
# # -----------------------------------------------------------
# # C√ìDIGO DE LA APLICACI√ìN STREAMLIT
# # -----------------------------------------------------------
# %%writefile app_portafolio.py
# import streamlit as st
# import pandas as pd
# import yfinance as yf
# import matplotlib.pyplot as plt
# 
# # -----------------------------------------------------------
# # CONFIGURACI√ìN DE LA P√ÅGINA
# # -----------------------------------------------------------
# st.set_page_config(page_title="An√°lisis de Portafolio de Inversi√≥n", page_icon="üìà", layout="centered")
# 
# # -----------------------------------------------------------
# # PORTADA
# # -----------------------------------------------------------
# st.title("üìä AN√ÅLISIS DE PORTAFOLIO DE INVERSI√ìN")
# st.markdown("""
# **Integrantes del grupo:**
# - Andrea Vel√°squez
# - Blanca √Ålvarez
# 
# **Carrera:** Ingenier√≠a Financiera
# **Instituci√≥n:** [Tu universidad aqu√≠]
# ---
# """)
# 
# # -----------------------------------------------------------
# # MEN√ö LATERAL PRINCIPAL
# # -----------------------------------------------------------
# menu = st.sidebar.radio(
#     "Navegaci√≥n",
#     [
#         "üè† Introducci√≥n",
#         "üìò Marco Te√≥rico",
#         "üß© Selecci√≥n de Propuesta",
#         "üß∞ Herramientas de Trabajo",
#         "üìà An√°lisis Pr√°ctico (Tickers)",
#         "üìö Referencias"
#     ]
# )
# 
# # -----------------------------------------------------------
# # 1Ô∏è‚É£ INTRODUCCI√ìN
# # -----------------------------------------------------------
# if menu == "üè† Introducci√≥n":
#     st.header("Definici√≥n general")
#     st.markdown("""
#     Un **an√°lisis de portafolio de inversi√≥n** estudia y eval√∫a el conjunto de activos financieros
#     (acciones, bonos, bienes ra√≠ces, entre otros) en el que una persona o empresa ha invertido.
#     Su objetivo es comprender el comportamiento de esos activos en t√©rminos de **riesgo y rentabilidad**.
# 
#     En un portafolio deben considerarse los siguientes elementos:
# 
#     - **Rendimiento:** Ganancia obtenida en funci√≥n de la tasa y el plazo de inversi√≥n.
#     - **Riesgo:** Posibilidad de que los rendimientos no sean los esperados.
#     - **Diversificaci√≥n:** Invertir en distintos tipos de activos para reducir el riesgo total.
#     - **Correlaci√≥n:** Mide si los activos se mueven juntos o en direcciones opuestas.
#     - **Relaci√≥n riesgo‚Äìretorno:** Eval√∫a si el rendimiento esperado compensa el riesgo asumido.
# 
#     En resumen, el an√°lisis de portafolio busca **equilibrar riesgo y rendimiento** mediante la diversificaci√≥n inteligente.
#     """)
# 
# # -----------------------------------------------------------
# # 2Ô∏è‚É£ MARCO TE√ìRICO
# # -----------------------------------------------------------
# elif menu == "üìò Marco Te√≥rico":
#     st.header("Tipos de An√°lisis de Portafolio")
# 
#     st.markdown("""
#     **1. Optimizaci√≥n del Portafolio (Frontera Eficiente)**
#     Propone combinaciones √≥ptimas de activos para maximizar rendimiento o minimizar riesgo.
#     La frontera eficiente, introducida por *Harry Markowitz (1952)*, define el punto ideal donde se obtiene
#     la mejor relaci√≥n entre riesgo y ganancia esperada.
# 
#     **2. Correlaci√≥n y Diversificaci√≥n**
#     - La **correlaci√≥n positiva** (+1) indica que los activos se mueven juntos.
#     - La **correlaci√≥n negativa** (-1) significa que cuando uno sube, el otro baja.
#     - La **correlaci√≥n cero** muestra que no hay relaci√≥n entre ellos.
#     La clave es combinar activos con baja correlaci√≥n para reducir el riesgo global.
# 
#     **3. Rentabilidad y Riesgo**
#     - *Rentabilidad Absoluta*: Ganancia total respecto a la inversi√≥n inicial.
#     - *Rentabilidad Anualizada (CAGR)*: Promedio anual del rendimiento.
#     - *Riesgo Sistem√°tico*: Afecta a todo el mercado (ej. inflaci√≥n, recesi√≥n).
#     - *Riesgo No Sistem√°tico*: Espec√≠fico de una empresa o activo, reducible por diversificaci√≥n.
#     """)
# 
# # -----------------------------------------------------------
# # 3Ô∏è‚É£ SELECCI√ìN DE LA PROPUESTA
# # -----------------------------------------------------------
# elif menu == "üß© Selecci√≥n de Propuesta":
#     st.header("Propuesta seleccionada: Diversificaci√≥n y Correlaci√≥n")
#     st.markdown("""
#     Elegimos esta propuesta porque permite analizar c√≥mo **combinar diferentes activos** para reducir el riesgo total del portafolio.
#     Utilizaremos **Python** (en Google Colab) para calcular las correlaciones entre los activos y evaluar c√≥mo la diversificaci√≥n mejora la estabilidad.
# 
#     Con librer√≠as como **NumPy**, **Pandas** y **Matplotlib**, analizaremos las relaciones entre los activos,
#     calcularemos m√©tricas clave (rendimiento, volatilidad) y visualizaremos los resultados
#     para apoyar decisiones financieras informadas.
#     """)
# 
# # -----------------------------------------------------------
# # 4Ô∏è‚É£ HERRAMIENTAS DE TRABAJO
# # -----------------------------------------------------------
# elif menu == "üß∞ Herramientas de Trabajo":
#     st.header("Herramientas Utilizadas")
#     st.markdown("""
#     - üêç **Python** en Google Colab
#     - üì¶ **Pandas, NumPy, Matplotlib** para an√°lisis y visualizaci√≥n
#     - üåê **Yahoo Finance (yfinance)** para descargar datos reales de mercado
#     - üíª **GitHub** para versionar y compartir el proyecto
#     """)
# 
# # -----------------------------------------------------------
# # 5Ô∏è‚É£ AN√ÅLISIS PR√ÅCTICO (INTERACTIVO)
# # -----------------------------------------------------------
# elif menu == "üìà An√°lisis Pr√°ctico (Tickers)":
#     st.header("An√°lisis de Portafolio con Acciones Reales")
# 
#     st.markdown("Explora c√≥mo la **diversificaci√≥n** reduce el riesgo combinando acciones de diferentes sectores.")
# 
#     ticker1 = st.text_input("Primera acci√≥n (ejemplo: AAPL)", "AAPL")
#     ticker2 = st.text_input("Segunda acci√≥n (ejemplo: KO)", "KO")
#     fecha_inicio = st.date_input("Fecha de inicio", pd.to_datetime("2022-01-01"))
#     fecha_fin = st.date_input("Fecha final", pd.to_datetime("2025-01-01"))
# 
#     if st.button("Ejecutar an√°lisis"):
#         tickers = [ticker1.upper(), ticker2.upper()]
#         st.subheader(f"üìä Acciones seleccionadas: {tickers}")
# 
#         try:
#             data = yf.download(tickers, start=fecha_inicio, end=fecha_fin)["Adj Close"]
#             st.success("Datos descargados correctamente ‚úÖ")
#         except Exception as e:
#             st.error(f"No se pudieron descargar los datos: {e}")
#             st.stop()
# 
#         st.dataframe(data.tail())
# 
#         returns = data.pct_change().dropna()
#         st.subheader("üìà Estad√≠sticas de rentabilidad diaria")
#         st.write(returns.describe())
# 
#         opcion = st.selectbox("Tipo de gr√°fico:", ["Evoluci√≥n de precios", "Relaci√≥n de rendimientos", "Matriz de correlaci√≥n"])
# 
#         if opcion == "Evoluci√≥n de precios":
#             fig, ax = plt.subplots(figsize=(8, 4))
#             data.plot(ax=ax)
#             ax.set_xlabel("Fecha")
#             ax.set_ylabel("Precio ajustado (USD)")
#             st.pyplot(fig)
# 
#         elif opcion == "Relaci√≥n de rendimientos":
#             fig2, ax2 = plt.subplots(figsize=(5, 5))
#             ax2.scatter(returns[tickers[0]], returns[tickers[1]], alpha=0.6, color="teal")
#             ax2.set_xlabel(f"Rendimiento diario de {tickers[0]}")
#             ax2.set_ylabel(f"Rendimiento diario de {tickers[1]}")
#             ax2.set_title("Relaci√≥n entre rendimientos")
#             st.pyplot(fig2)
# 
#         else:
#             correlacion = returns.corr()
#             st.subheader("üìä Matriz de correlaci√≥n")
#             st.write(correlacion.style.background_gradient(cmap="coolwarm").format("{:.2f}"))
# 
#         st.markdown("""
#         ---
#         ### üí° Interpretaci√≥n
#         Una correlaci√≥n baja o negativa indica que los activos **no se mueven igual**, lo cual
#         ayuda a **reducir el riesgo total** del portafolio.
#         La diversificaci√≥n entre sectores distintos produce una estructura m√°s estable frente a la volatilidad del mercado.
#         """)
# 
# # -----------------------------------------------------------
# # 6Ô∏è‚É£ REFERENCIAS
# # -----------------------------------------------------------
# elif menu == "üìö Referencias":
#     st.header("Referencias Bibliogr√°ficas")
#     st.markdown("""
#     - [Mar√≠n Ruiz, H. (2014). YMCAFCF03100414.pdf](https://hector.marinruiz.com.mx/wp-content/uploads/YMCAFCF03100414.pdf#page=14.10)
#     - [Investopedia ‚Äì Portfolio Definition](https://www.investopedia.com/terms/p/portfolio.asp)
#     """)
# 
# # -----------------------------------------------------------
# # FIN DEL C√ìDIGO
# # -----------------------------------------------------------
# 
#

!streamlit run app_portafolio.py --server.enableCORS false --server.enableXsrfProtection false