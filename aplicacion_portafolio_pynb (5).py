# -*- coding: utf-8 -*-
"""Aplicacion_portafolio pynb.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/github/blankchechi26-alt/Borradores-Portafolio/blob/main/Aplicacion_portafolio%20pynb.ipynb
"""

import streamlit as st
import pandas as pd
import yfinance as yf
import matplotlib.pyplot as plt

st.title('ANLISIS DE PORTAFOLIO DE INVERSIN')

st.markdown('**INTEGRANTES DEL GRUPO**')

st.markdown('Andrea Velasquez')

st.markdown('Blanca Alvarez')

Temas=['Definici贸n','Tipos de analisis de portafolio', 'Selecci贸n de la propuesta', 'Herramienta', 'Referencias']

Tema_seleccionado=st.selectbox('selecciona un tema;', Temas)

st.write('Has seleccionado:', Tema_seleccionado)



if Tema_seleccionado=='Definici贸n':
    st.markdown('''**ANLISIS DE PORTAFOLIO DE INVERSIN:**

Un An谩lisis de Portafolio de Inversi贸n consiste en estudiar y evaluar el conjunto de activos financieros (acciones, bonos, bienes ra铆ces, entre otros) en el que una persona o empresa ha invertido. El objetivo de este an谩lisis es entender c贸mo se comportan esos activos, tanto en t茅rminos de riesgo como de rentabilidad.

**Principios elementales de inversi贸n**.
En todo instrumento financiero de un portafolio de inversi贸n tienen
que considerarse los siguientes elementos:

- ***Rendimiento***: Es la ganancia que se obtendr铆a y est谩 dada en funci贸n a la tasa y al plazo de inversi贸n.

Es la estimaci贸n de las ganancias que se espera obtener de las inversiones a lo largo del tiempo. Este rendimiento puede variar dependiendo de las condiciones del mercado, pero es importante proyectarlo para tomar decisiones informadas.

- ***Riesgo***: Se refiere a la posibilidad de que los rendimientos no se den como se esperaba. En este contexto, se suelen usar herramientas estad铆sticas como la volatilidad (que mide las fluctuaciones de los precios de los activos), la varianza y la desviaci贸n est谩ndar para cuantificar cu谩n impredecibles o inestables son los rendimientos.

Debe determinarse cu谩nto riesgo se est谩 dispuesto a asumir.

- ***Diversificaci贸n y correlaci贸n***: Uno de los principios clave en la gesti贸n de un portafolio es diversificar. Esto significa invertir en diferentes tipos de activos que no se muevan de manera id茅ntica. La correlaci贸n entre los activos muestra si sus rendimientos tienden a moverse juntos o en direcciones opuestas. Idealmente, se buscan activos con baja correlaci贸n entre s铆, para reducir el riesgo total del portafolio.

Es decir, en lugar de invertir todo el capital en un solo activo (como, por ejemplo, solo en acciones de una empresa), se distribuye entre diferentes activos, clases de activos o mercados. Al hacer esto, se busca minimizar el impacto de los posibles rendimientos negativos de un activo espec铆fico.

- ***Relaci贸n riesgo-retorno***: Un an谩lisis de portafolio tambi茅n eval煤a si el rendimiento que se espera obtener justifica el riesgo que se asume. Es decir, busca encontrar un balance entre obtener buenos rendimientos sin exponerse a un riesgo excesivo.

**En resumen**, Un portafolio de inversi贸n es un conjunto de activos financieros que se combinan para generar rendimientos con un nivel de riesgo controlado. La diversificaci贸n busca repartir el dinero entre diferentes activos para reducir riesgos, mientras que la correlaci贸n mide c贸mo se comportan esos activos entre s铆. El objetivo es equilibrar el riesgo y el retorno para optimizar las ganancias.

Es una herramienta crucial para los inversionistas que buscan maximizar su rentabilidad y minimizar los riesgos asociados con sus decisiones financieras.''')
elif Tema_seleccionado=='Tipos de analisis de portafolio':
    st.markdown('''**TIPOS DE ANALISIS DE PORTAFOLIO:**
***Presentamos las siguientes propuestas:***

**Propuesta 1:**

**Optimizaci贸n de portafolio: Frontera eficiente**

La frontera eficiente es un concepto clave en la optimizaci贸n de portafolios de inversi贸n. Se refiere a la combinaci贸n ideal de activos que te permite maximizar el rendimiento para un nivel de riesgo dado, o minimizar el riesgo para un rendimiento esperado. Esta idea fue propuesta por Harry Markowitz en 1952, quien mostr贸 c贸mo diversificar adecuadamente las inversiones puede reducir el riesgo total de un portafolio sin sacrificar el rendimiento.

En t茅rminos simples, la frontera eficiente es como un "mapa" que te gu铆a a la mejor relaci贸n entre riesgo y ganancia. Al elegir los activos correctos y combinarlos de manera eficiente, puedes obtener el m谩ximo rendimiento posible sin asumir un riesgo excesivo. Adem谩s, el riesgo total del portafolio no es solo la suma de los riesgos de cada activo, sino que tambi茅n depende de c贸mo se comportan juntos, es decir, de la covarianza entre los activos.

La importancia de la frontera eficiente radica en que te ayuda a crear un portafolio 贸ptimo, balanceando riesgo y rentabilidad de manera informada y estrat茅gica.

En resumen, la frontera eficiente ayuda a encontrar la mejor relaci贸n entre riesgo y rentabilidad, utilizando la diversificaci贸n para reducir el riesgo total del portafolio. Esto convierte a la optimizaci贸n de portafolios en una herramienta clave para los inversionistas que buscan maximizar el rendimiento mientras controlan el riesgo.


**Propuesta 2:**

**Efecto de la Correlaci贸n y Diversificaci贸n**

La diversificaci贸n y la correlaci贸n son dos conceptos clave para gestionar el riesgo y optimizar los rendimientos en un portafolio de inversi贸n. Ambos est谩n muy relacionados y, cuando se usan correctamente, permiten reducir el riesgo y maximizar las ganancias.

**Diversificaci贸n:**

La diversificaci贸n es una estrategia en la que se distribuye el dinero entre diferentes tipos de activos (acciones, bonos, bienes ra铆ces, etc.) para minimizar el riesgo de perder todo el dinero en caso de que un activo tenga mal rendimiento. Al tener inversiones en distintos sectores o mercados, si uno pierde valor, el rendimiento de otros activos puede compensarlo.

- ***Ejemplo:*** Si solo inviertes en acciones de tecnolog铆a y el sector tecnol贸gico cae, todo tu portafolio perder铆a valor. Pero si tambi茅n inviertes en otros activos como bonos o acciones de sectores como energ铆a o salud, es menos probable que todos los activos caigan al mismo tiempo, lo que reduce el riesgo global.

La diversificaci贸n ayuda a reducir el riesgo idiosincr谩tico, es decir, el riesgo espec铆fico de una empresa o sector. La clave es elegir activos que no se comporten de la misma forma, para que si uno baja, el otro no tenga que hacerlo.

**Correlaci贸n:**

La correlaci贸n mide c贸mo se comportan dos activos en relaci贸n entre s铆. Existen tres tipos de correlaci贸n:

- ***Correlaci贸n positiva (+1):*** Cuando un activo sube, el otro tambi茅n sube. Los activos se mueven en la misma direcci贸n.
**Ejemplo:** Dos acciones tecnol贸gicas que suben o bajan juntas.

- ***Correlaci贸n negativa (-1):*** Cuando un activo sube, el otro baja. Esto es 煤til para la diversificaci贸n, ya que reduce el riesgo total al equilibrar los movimientos.
**Ejemplo:** Si las acciones caen, los bonos pueden subir, ya que los inversores buscan refugio en los bonos seguros.

- ***Correlaci贸n cero (0):*** Los activos no tienen relaci贸n entre s铆, es decir, sus movimientos no afectan al otro.
**Ejemplo:** El precio del oro y las acciones de una empresa tecnol贸gica pueden no estar relacionados.

***Relaci贸n entre Diversificaci贸n y Correlaci贸n:***

La diversificaci贸n es m谩s efectiva cuando se seleccionan activos con baja correlaci贸n. Si todos los activos se comportan de la misma forma (correlaci贸n positiva alta), no estar谩s reduciendo el riesgo. Por el contrario, si eliges activos con correlaci贸n negativa o baja, el riesgo total del portafolio se reduce, ya que los rendimientos de un activo pueden compensar las p茅rdidas de otro.

Markowitz (1952) fue uno de los primeros en mostrar que la diversificaci贸n se logra mejor cuando los activos tienen bajas covarianzas entre s铆. Seg煤n el, es importante evitar invertir en activos con altas covarianzas y, en su lugar, diversificar a trav茅s de sectores diferentes, ya que los activos de distintos sectores tienden a tener menores covarianzas que aquellos dentro del mismo sector. Esto hace que el portafolio sea m谩s resistente a fluctuaciones del mercado.

Estas herramientas ayudan a construir un portafolio equilibrado que maximiza las oportunidades de ganancia y minimiza el riesgo total, asegurando una mayor estabilidad frente a fluctuaciones del mercado.


**Propuesta 3:An谩lisis de rentabilidad y riesgo***

El an谩lisis de rentabilidad y riesgo es fundamental en la toma de decisiones de inversi贸n. Permite a los inversionistas evaluar las posibles ganancias de una inversi贸n en relaci贸n con el riesgo que est谩n dispuestos a asumir.

**Rentabilidad:**

La rentabilidad mide el rendimiento de una inversi贸n durante un periodo de tiempo. Se calcula como la diferencia entre el valor final y el valor inicial de la inversi贸n, expresada como un porcentaje. Existen dos formas de medirla:

- ***Rentabilidad Absoluta:*** Simplemente calcula la ganancia o p茅rdida en relaci贸n con la inversi贸n inicial.

- ***Rentabilidad Annualizada (CAGR):*** Permite comparar inversiones de diferente duraci贸n al calcular el rendimiento promedio anual.

Las acciones suelen tener una rentabilidad m谩s alta, pero tambi茅n m谩s vol谩til, mientras que los bonos ofrecen una rentabilidad m谩s baja, pero con menos riesgo.

**Riesgo:**

El riesgo mide la incertidumbre sobre los rendimientos futuros. El riesgo puede ser de dos tipos:

- ***Riesgo Sistem谩tico (de mercado):*** Es el riesgo que afecta a todo el mercado, como cambios en la econom铆a o pol铆ticas gubernamentales. Este tipo de riesgo no se puede eliminar mediante diversificaci贸n.

- ***Riesgo No Sistem谩tico (espec铆fico):*** Es el riesgo asociado con un activo espec铆fico, como una empresa. Este riesgo puede reducirse al diversificar el portafolio.

**El riesgo se mide con:**

- ***Volatilidad (Desviaci贸n est谩ndar):*** Indica cu谩nto fluct煤a el precio o rendimiento de un activo. Cuanto mayor es la volatilidad, mayor es el riesgo.

- ***Beta (尾):*** Mide la sensibilidad de un activo respecto al mercado. Un beta alto significa que el activo es m谩s vol谩til que el mercado.

**En resumen,** el an谩lisis de rentabilidad y riesgo permite a los inversionistas tomar decisiones informadas, balanceando los rendimientos esperados con los riesgos involucrados. La diversificaci贸n y la frontera eficiente son herramientas fundamentales para crear un portafolio equilibrado que maximice las ganancias sin asumir riesgos excesivos.

''')
elif Tema_seleccionado=='Selecci贸n de la propuesta':
    st.markdown('''**Selecci贸n de la propuesta**

    ***Diversificaci贸n y correlaci贸n**

 Elegimos la propuesta de Diversificaci贸n y Correlaci贸n porque nos permite analizar c贸mo combinar diferentes activos para reducir el riesgo total del portafolio. Utilizaremos Python en Google Colab para calcular las correlaciones entre los activos y evaluar c贸mo la diversificaci贸n mejora la estabilidad del portafolio. Con librer铆as como NumPy, Pandas y Matplotlib, podremos analizar de manera eficiente las relaciones entre los activos, calcular m茅tricas clave como el rendimiento esperado y la volatilidad, y visualizar los resultados, lo que nos ayudar谩 a tomar decisiones m谩s informadas en la construcci贸n de un portafolio equilibrado.
    ''')
elif Tema_seleccionado=='Ejemplo ticker':
     st.markdown('''**Selecci贸n de ejemplo de diversificaci贸n**
     st.title('EJEMPLO ACCION)
st.subheader('Ejemplo pr谩ctico de diversificaci贸n con dos acciones')

st.markdown("""
Este ejemplo muestra c贸mo la **diversificaci贸n** reduce el riesgo al combinar activos de distintos sectores.
Usaremos las acciones de **Apple (AAPL)** y **Coca-Cola (KO)**.
""")

# -------------------------------
# Selecci贸n de acciones
# -------------------------------
tickers = ['AAPL', 'KO']
st.write("**Acciones seleccionadas:**", tickers)

# -------------------------------
# Descarga de datos desde Yahoo Finance
# -------------------------------
# Removed the try...except block to allow the error to propagate if yf.download fails.
data = yf.download(tickers, start='2022-01-01', end='2025-01-01')
st.subheader(" Precios hist贸ricos ajustados")
st.dataframe(data.tail())


# -------------------------------
# C谩lculo de rendimientos
# -------------------------------
# Select the 'Close' price from the MultiIndex data
close_prices = data['Close']
returns = close_prices.pct_change().dropna()

st.subheader(" Estad铆sticas de rentabilidad diaria")
st.write(returns.describe())

# -------------------------------
# Gr谩fico de evoluci贸n de precios
# -------------------------------
st.subheader(" Evoluci贸n del precio de las acciones")
fig, ax = plt.subplots()
close_prices.plot(ax=ax)
ax.set_xlabel("Fecha")
ax.set_ylabel("Precio ajustado (USD)")
st.pyplot(fig)

# -------------------------------
# Gr谩fico de dispersi贸n (correlaci贸n)
# -------------------------------
st.subheader(" Relaci贸n entre los rendimientos (correlaci贸n)")
fig2, ax2 = plt.subplots()
ax2.scatter(returns['AAPL'], returns['KO'], alpha=0.6)
ax2.set_xlabel('Rendimiento diario de Apple (AAPL)')
ax2.set_ylabel('Rendimiento diario de Coca-Cola (KO)')
ax2.set_title('Diversificaci贸n entre Apple y Coca-Cola')
st.pyplot(fig2)

# -------------------------------
# Matriz de correlaci贸n
# -------------------------------
st.subheader(" Matriz de correlaci贸n")
correlacion = returns.corr()
st.write(correlacion)

# -------------------------------
# Interpretaci贸n
# -------------------------------
st.markdown("""
###  Interpretaci贸n
- Si la **correlaci贸n** entre AAPL y KO es **baja o negativa**, significa que las acciones no se mueven igual:
  cuando una baja, la otra puede subir o mantenerse estable.
- Esto **reduce el riesgo total del portafolio** y demuestra la utilidad de la **diversificaci贸n**.

**Conclusi贸n:** combinar activos de sectores distintos (tecnolog铆a y consumo) genera un portafolio m谩s estable frente a la volatilidad del mercado.
""")

elif Tema_seleccionado=='Herramienta':
    st.markdown('''**Herramientas de trabajo**
- Python en google Colab
- Github (para versionar y compartir el proyecto''')
elif Tema_seleccionado=='Referencias':
    st.markdown('''**Referencias**
  -  https://hector.marinruiz.com.mx/wp-content/uploads/YMCAFCF03100414.pdf#page=14.10
